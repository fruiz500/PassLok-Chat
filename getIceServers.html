<!-- modified from url=(0058)https://cdn.webrtc-experiment.com/getIceServers/index.html -->
< html > < head > < meta http - equiv = "Content-Type"
content = "text/html; charset=UTF-8" > < /head>

<body>

<div class="webkit-line-gutter-backdrop">
</div > 

<table> 
<tbody>
<tr> 
<td class = "webkit-line-number" value = "1" > </td>
<td class="webkit-line-content"><span class="webkit-html-tag">&lt;script&gt;</span > </td>
</tr>
<tr>
<td class = "webkit-line-number" value = "2" > </td>
<td class="webkit-line-content">function createCORSRequest(method, url) {</td>
</tr>
<tr>
<td class="webkit-line-number" value="3"></td > 
<td class = "webkit-line-content" > var xhr = new XMLHttpRequest(); </td>
</tr> 
<tr> 
<td class = "webkit-line-number" value = "4" > </td>
<td class="webkit-line-content">    if ("withCredentials" in xhr) {</td>
</tr>
<tr>
<td class="webkit-line-number" value="5"></td >
<td class = "webkit-line-content" > xhr.open(method, url, true); </td>
</tr>
<tr> 
<td class = "webkit-line-number" value = "6" > </td>
<td class="webkit-line-content">    } else if (typeof XDomainRequest != "undefined") {</td>
</tr>
<tr>
<td class="webkit-line-number" value="7"></td >
<td class = "webkit-line-content" > xhr = new XDomainRequest(); </td>
</tr>
<tr>
<td class = "webkit-line-number" value = "8" > </td>
<td class="webkit-line-content">        xhr.open(method, url);</td>
</tr>
<tr>
<td class="webkit-line-number" value="9"></td>
<td class = "webkit-line-content" > } else { </td>
</tr>
<tr>
<td class = "webkit-line-number" value = "10" ></td>
<td class="webkit-line-content">        xhr = null;</td >
</tr>
<tr>
<td class="webkit-line-number" value="11"></td >
<td class = "webkit-line-content" > } </td>
</tr>
<tr>
<td class = "webkit-line-number" value = "12" > </td>
<td class="webkit-line-content">    return xhr;</td >
</tr>
<tr>
<td class="webkit-line-number" value="13"></td >
<td class = "webkit-line-content" > } </td>
</tr>
<tr>
<td class = "webkit-line-number" value = "14" > </td>
<td class="webkit-line-content">var url = 'https:/ / api.xirsys.com / getIceServers';</td>
</tr>
<tr>
<td class="webkit-line-number" value="15"></td>
<td class="webkit-line-content">var xhr = createCORSRequest('POST', url);</td>
</tr>
<tr>
<td class="webkit-line-number" value="16"></td>
<td class="webkit-line-content">xhr.onload = function () {</td>
</tr>
<tr>
<td class="webkit-line-number" value="17"></td>
<td class="webkit-line-content">    window.parent.postMessage({</td>
</tr>
<tr>
<td class="webkit-line-number" value="18"></td>
<td class="webkit-line-content">        iceServers: JSON.parse(xhr.responseText).d.iceServers</td>
</tr>
<tr>
<td class="webkit-line-number" value="19"></td>
<td class="webkit-line-content">    }, '*');</td>
</tr>
<tr>
<td class="webkit-line-number" value="20"></td>
<td class="webkit-line-content">};</td>
</tr>
<tr>
<td class="webkit-line-number" value="21"></td>
<td class="webkit-line-content">xhr.onerror = function () {</td>
</tr>
<tr>
<td class="webkit-line-number" value="22"></td>
<td class="webkit-line-content">    console.error('Woops, there was an error making xhr request.');</td>
</tr>
<tr>
<td class="webkit-line-number" value="23"></td>
<td class="webkit-line-content">};</td>
</tr>
<tr>
<td class="webkit-line-number" value="24"></td>
<td class="webkit-line-content">xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");</td>
</tr>
<tr>
<td class="webkit-line-number" value="25"></td>
<td class="webkit-line-content">window.addEventListener('message', function (event) {</td>
</tr>
<tr>
<td class="webkit-line-number" value="26"></td>
<td class="webkit-line-content">    if (!event.data || typeof event.data !== 'string') return;</td>
</tr>
<tr>
<td class="webkit-line-number" value="27"></td>
<td class="webkit-line-content">    if(event.data == 'get - ice - servers ') {</td>
</tr>
<tr>
<td class="webkit-line-number" value="28"></td>
<td class="webkit-line-content">        xhr.send('
ident = fruizg & amp;
secret = 9534 c075 - 9821 - 4e d3 - b157 - f5b65be0ef85 & amp;
domain = passlok.com & amp;
application =
    default & amp;
room =
    default & amp;
secure = 1 ');</td>
</tr>
<tr>
<td class="webkit-line-number" value="29"></td>
<td class="webkit-line-content">    }</td>
</tr>
<tr>
<td class="webkit-line-number" value="30"></td>
<td class="webkit-line-content">});</td>
</tr>
<tr>
<td class="webkit-line-number" value="31"></td>
<td class="webkit-line-content"><span class="webkit-html-tag">&lt;/script&gt;</span></td>
</tr>
<tr>
<td class="webkit-line-number" value="32"></td>
<td class="webkit-line-content"><span class="webkit-html-end-of-file"></span></td>
</tr>
</tbody>
</table>

</body></html>